{
  "files": [
    {
      "filename": "tests/fixtures/foo.ts",
      "source": "const a = 1\nconst b = 2\nconst c = 3\n\nconst d = a + b + c\n\nconst e = 1\n\nconsole.log('a')\n",
      "lines": [
        {
          "line": 5,
          "messages": [
            {
              "message": "Variable 'd' is declared but never used. Unused variables should start with a '_'.",
              "code": "eslint(no-unused-vars)",
              "severity": "warning",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/no-unused-vars.html",
              "help": "Consider removing this declaration.",
              "filename": "tests/fixtures/foo.ts",
              "labels": [
                {
                  "label": "'d' is declared here",
                  "span": {
                    "offset": 43,
                    "length": 1,
                    "line": 5,
                    "column": 7
                  }
                }
              ],
              "related": []
            }
          ]
        },
        {
          "line": 7,
          "messages": [
            {
              "message": "Variable 'e' is declared but never used. Unused variables should start with a '_'.",
              "code": "eslint(no-unused-vars)",
              "severity": "warning",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/no-unused-vars.html",
              "help": "Consider removing this declaration.",
              "filename": "tests/fixtures/foo.ts",
              "labels": [
                {
                  "label": "'e' is declared here",
                  "span": {
                    "offset": 64,
                    "length": 1,
                    "line": 7,
                    "column": 7
                  }
                }
              ],
              "related": []
            }
          ]
        }
      ]
    },
    {
      "filename": "tests/fixtures/bar.ts",
      "source": "function bar() { console.log('xxx'); function baz() { console.log('xxx') } }\n\n\nfunction foo() { console.log('xxx') }\n\nconsole.log('xxxx');\n\n\ndebugger\n",
      "lines": [
        {
          "line": 1,
          "messages": [
            {
              "message": "Function 'bar' is declared but never used.",
              "code": "eslint(no-unused-vars)",
              "severity": "warning",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/no-unused-vars.html",
              "help": "Consider removing this declaration.",
              "filename": "tests/fixtures/bar.ts",
              "labels": [
                {
                  "label": "'bar' is declared here",
                  "span": {
                    "offset": 9,
                    "length": 3,
                    "line": 1,
                    "column": 10
                  }
                }
              ],
              "related": []
            },
            {
              "message": "Function 'baz' is declared but never used.",
              "code": "eslint(no-unused-vars)",
              "severity": "warning",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/no-unused-vars.html",
              "help": "Consider removing this declaration.",
              "filename": "tests/fixtures/bar.ts",
              "labels": [
                {
                  "label": "'baz' is declared here",
                  "span": {
                    "offset": 46,
                    "length": 3,
                    "line": 1,
                    "column": 47
                  }
                }
              ],
              "related": []
            }
          ]
        },
        {
          "line": 4,
          "messages": [
            {
              "message": "Function 'foo' is declared but never used.",
              "code": "eslint(no-unused-vars)",
              "severity": "warning",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/no-unused-vars.html",
              "help": "Consider removing this declaration.",
              "filename": "tests/fixtures/bar.ts",
              "labels": [
                {
                  "label": "'foo' is declared here",
                  "span": {
                    "offset": 88,
                    "length": 3,
                    "line": 4,
                    "column": 10
                  }
                }
              ],
              "related": []
            }
          ]
        },
        {
          "line": 9,
          "messages": [
            {
              "message": "`debugger` statement is not allowed",
              "code": "eslint(no-debugger)",
              "severity": "error",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/no-debugger.html",
              "help": "Remove the debugger statement",
              "filename": "tests/fixtures/bar.ts",
              "labels": [
                {
                  "span": {
                    "offset": 141,
                    "length": 8,
                    "line": 9,
                    "column": 1
                  }
                }
              ],
              "related": []
            }
          ]
        }
      ]
    },
    {
      "filename": "packages/client/app/app.vue",
      "source": "<script setup lang=\"ts\">\nimport Shiki from '~~/components/Shiki.vue'\n\nconst { data } = await useFetch('/api/payload.json', {})\n\n// 获取文件扩展名\nfunction getFileExt(filename: string) {\n  const ext = filename.split('.').pop()\n  return ext ? `.${ext}` : ''\n}\n\n// 获取文件图标\nfunction getFileIcon(filename: string) {\n  const ext = getFileExt(filename)\n  switch (ext) {\n    case '.ts':\n    case '.tsx':\n      return 'vscode-icons:file-type-typescript'\n    case '.js':\n    case '.jsx':\n      return 'vscode-icons:file-type-javascript'\n    case '.vue':\n      return 'vscode-icons:file-type-vue'\n    case '.css':\n      return 'vscode-icons:file-type-css'\n    case '.json':\n      return 'vscode-icons:file-type-json'\n    case '.md':\n      return 'vscode-icons:file-type-markdown'\n    default:\n      return 'vscode-icons:file-type-text'\n  }\n}\n\n// 计算错误标记的高度\nfunction calculateErrorHeight(messages: any[]) {\n  if (!messages || messages.length === 0)\n    return 0\n\n  // 计算所有 labels 的最大数量\n  const maxLabels = Math.max(...messages.map(msg => msg.labels?.length || 0))\n\n  // 每个 label 大约需要 2 行的高度（一行给指示器，一行给消息）\n  // 每行约 20px 高度，加上一些间距\n  return maxLabels > 0 ? maxLabels * 2 * 20 + 15 : 0\n}\n\n// 跳转到编辑器\nfunction openInEditor(filename: string, line: number, column: number) {\n  // 尝试使用 vscode:// 协议打开\n  const vscodeUrl = `vscode://file/${encodeURIComponent(filename)}:${line}:${column}`\n  window.open(vscodeUrl, '_blank')\n}\n\n// 处理 v-html 输入，将单引号中间的内容替换为带背景色\nfunction processLabelHtml(text: string) {\n  if (!text)\n    return ''\n\n  // 匹配单引号中间的内容，并替换为带背景色的 span\n  return text.replace(/'([^']+)'/g, '<span class=\"bg-neutral-100 px-1 py-0.5 rounded font-semibold\">$1</span>')\n}\n</script>\n\n<template>\n  <UApp>\n    <main class=\"container mx-auto p-4\">\n      <!-- 摘要信息 -->\n      <UCard v-if=\"data?.summary\" class=\"mb-4\">\n        <template #header>\n          <div class=\"flex items-center gap-2\">\n            <u-icon name=\"heroicons:information-circle\" />\n            <span>检查摘要</span>\n          </div>\n        </template>\n        <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n          <div>\n            <div class=\"text-neutral-500\">\n              检查文件数\n            </div>\n            <div class=\"font-mono\">\n              {{ data.summary.number_of_files }}\n            </div>\n          </div>\n          <div>\n            <div class=\"text-neutral-500\">\n              线程数\n            </div>\n            <div class=\"font-mono\">\n              {{ data.summary.threads_count }}\n            </div>\n          </div>\n          <div>\n            <div class=\"text-neutral-500\">\n              耗时\n            </div>\n            <div class=\"font-mono\">\n              {{ (data.summary.start_time * 1000).toFixed(2) }}ms\n            </div>\n          </div>\n          <div>\n            <div class=\"text-neutral-500\">\n              问题总数\n            </div>\n            <div class=\"font-mono\">\n              {{data.files?.reduce((sum, file) => sum + file.lines.reduce((s, line) => s + line.messages.length, 0), 0)\n                || 0}}\n            </div>\n          </div>\n        </div>\n      </UCard>\n\n      <!-- 文件列表 -->\n      <div v-if=\"data?.files\" class=\"space-y-6\">\n        <UCard v-for=\"file in data.files\" :key=\"file.filename\">\n          <template #header>\n            <div class=\"flex items-center gap-2\">\n              <u-icon :name=\"getFileIcon(file.filename)\" />\n              <span class=\"text-neutral-700 cursor-pointer hover:underline font-mono\">{{ file.filename }}</span>\n            </div>\n          </template>\n\n          <div class=\"relative font-mono\">\n            <!-- 问题列表 -->\n            <div v-if=\"file.lines.length > 0\" class=\"space-y-4\">\n              <div v-for=\"lineData in file.lines\" :key=\"`${file.filename}-${lineData.line}`\" class=\"overflow-hidden\">\n                <div class=\"p-4\">\n                  <!-- 当前行代码 -->\n                  <div class=\"flex gap-4 items-start\">\n                    <span class=\"text-neutral-500 font-mono text-sm relative top-[3px]\">{{ lineData.line }}</span>\n                    <div class=\"flex-1\">\n                      <Shiki :code=\"file.source.split('\\n')[lineData.line - 1] || ''\"\n                        :ext=\"getFileExt(file.filename)\" />\n\n                      <div class=\"flex relative text-neutral-400\"\n                        :style=\"{ minHeight: `${calculateErrorHeight(lineData.messages)}px` }\">\n                        <a v-for=\"(label, totalLabelIndex) in lineData.messages\n                          .flatMap(m => m.labels)\n                          .sort((a, b) => a.span.column - b.span.column)\" :key=\"totalLabelIndex\" target=\"_blank\"\n                          :href=\"lineData.messages[totalLabelIndex]?.url\"\n                          class=\"absolute whitespace-pre hover:text-neutral-800 cursor-pointer\"\n                          :style=\"{ left: `calc(${label.span.column - 1}ch)` }\">\n                          <div>\n                            <span v-for=\"i in Math.floor((label.span.length - 1) / 2)\" :key=\"`pre-${i}`\">─</span>┬<span\n                              v-for=\"i in Math.ceil((label.span.length - 1) / 2)\" :key=\"`post-${i}`\">─</span>\n                          </div>\n                          <div v-for=\"i in (lineData.messages.flatMap(m => m.labels).length - 1 - totalLabelIndex)\"\n                            :key=\"`bar-${i}`\" class=\"relative\"\n                            :style=\"{ left: `calc(${Math.floor((label.span.length - 1) / 2) - 1}ch)` }\">\n                            │\n                          </div>\n                          <div v-if=\"label.label\" class=\"relative flex\"\n                            :style=\"{ left: `calc(${Math.floor((label.span.length - 1) / 2) - 1}ch)` }\">\n                            <div>\n                              ╰─\n                            </div>\n                            <UTooltip :delay-duration=\"100\" :content=\"{ side: 'top' }\"\n                              :disable-hoverable-content=\"false\" :ui=\"{ content: 'py-4 px-5 h-auto max-w-sm' }\">\n                              <template #content>\n                                <div class=\"space-y-3\">\n                                  <!-- 标题区域 -->\n                                  <div class=\"flex items-center gap-2 pb-2 border-b border-neutral-200\">\n                                    <div class=\"flex items-center gap-2 px-2 py-1 rounded-md text-sm font-medium\"\n                                      :class=\"lineData.messages[totalLabelIndex]?.severity === 'error'\n                                        ? 'bg-red-50 text-red-700'\n                                        : 'bg-yellow-50 text-yellow-700'\">\n                                      <u-icon :name=\"lineData.messages[totalLabelIndex]?.severity === 'error'\n                                        ? 'radix-icons:cross-2'\n                                        : 'radix-icons:exclamation-triangle'\" class=\"w-3.5 h-3.5\" />\n                                      <span class=\"font-mono\">{{ lineData.messages[totalLabelIndex]?.code }}</span>\n                                    </div>\n                                  </div>\n\n                                  <!-- 消息内容 -->\n                                  <div v-if=\"lineData.messages[totalLabelIndex]?.message\"\n                                    class=\"text-sm leading-relaxed text-neutral-700\"\n                                    v-html=\"processLabelHtml(lineData.messages[totalLabelIndex]?.message)\" />\n\n                                  <!-- 帮助信息 -->\n                                  <div v-if=\"lineData.messages[totalLabelIndex]?.help\"\n                                    class=\"flex items-start gap-2 p-2 bg-blue-50 rounded-md border border-blue-100\">\n                                    <u-icon name=\"heroicons:light-bulb\"\n                                      class=\"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0\" />\n                                    <div class=\"text-xs text-blue-700 leading-relaxed\">\n                                      {{ lineData.messages[totalLabelIndex]?.help }}\n                                    </div>\n                                  </div>\n\n                                  <!-- 操作按钮 -->\n                                  <div class=\"flex items-center gap-2 pt-2 border-t border-neutral-200\">\n                                    <!-- 跳转到规则 URL -->\n                                    <a v-if=\"lineData.messages[totalLabelIndex]?.url\"\n                                      :href=\"lineData.messages[totalLabelIndex]?.url\" target=\"_blank\"\n                                      class=\"flex items-center gap-1.5 px-2 py-1.5 rounded-md hover:bg-neutral-100 transition-colors text-xs text-neutral-600\">\n                                      <u-icon name=\"radix-icons:info-circled\" class=\"w-3.5 h-3.5\" />\n                                      <span>Check rule</span>\n                                    </a>\n\n                                    <!-- 跳转到编辑器 -->\n                                    <button\n                                      class=\"flex items-center gap-1.5 cursor-pointer px-2 py-1.5 rounded-md hover:bg-neutral-100 transition-colors text-xs text-neutral-600\"\n                                      @click=\"openInEditor(file.filename, lineData.line, label.span.column)\">\n                                      <u-icon name=\"radix-icons:open-in-new-window\" class=\"w-3.5 h-3.5\" />\n                                      <span>Open in editor</span>\n                                    </button>\n                                  </div>\n                                </div>\n                              </template>\n                              <div v-html=\"processLabelHtml(label.label)\" />\n                            </UTooltip>\n                          </div>\n                        </a>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </UCard>\n      </div>\n\n      <!-- 加载状态 -->\n      <div v-else-if=\"!data\" class=\"flex items-center justify-center py-12\">\n        <div class=\"text-center\">\n          <u-icon name=\"heroicons:arrow-path\" class=\"w-8 h-8 mx-auto mb-2 animate-spin text-neutral-400\" />\n          <div class=\"text-neutral-500\">\n            正在加载 oxlint 结果...\n          </div>\n        </div>\n      </div>\n\n      <!-- 空状态 -->\n      <div v-else class=\"flex items-center justify-center py-12\">\n        <div class=\"text-center\">\n          <u-icon name=\"heroicons:document-text\" class=\"w-8 h-8 mx-auto mb-2 text-neutral-400\" />\n          <div class=\"text-neutral-500\">\n            没有找到任何文件\n          </div>\n        </div>\n      </div>\n    </main>\n  </UApp>\n</template>\n",
      "lines": [
        {
          "line": 38,
          "messages": [
            {
              "message": "Expected { after 'if' condition.",
              "code": "eslint(curly)",
              "severity": "error",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/curly.html",
              "help": "Replace `return 0` with `{return 0}`.",
              "filename": "packages/client/app/app.vue",
              "labels": [
                {
                  "span": {
                    "offset": 976,
                    "length": 8,
                    "line": 38,
                    "column": 5
                  }
                }
              ],
              "related": []
            }
          ]
        },
        {
          "line": 58,
          "messages": [
            {
              "message": "Expected { after 'if' condition.",
              "code": "eslint(curly)",
              "severity": "error",
              "causes": [],
              "url": "https://oxc.rs/docs/guide/usage/linter/rules/eslint/curly.html",
              "help": "Replace `return ''` with `{return ''}`.",
              "filename": "packages/client/app/app.vue",
              "labels": [
                {
                  "span": {
                    "offset": 1691,
                    "length": 9,
                    "line": 58,
                    "column": 5
                  }
                }
              ],
              "related": []
            }
          ]
        }
      ]
    }
  ],
  "summary": {
    "number_of_files": 16,
    "number_of_rules": null,
    "threads_count": 8,
    "start_time": 0.019192625
  }
}
